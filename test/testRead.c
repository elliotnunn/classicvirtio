/* Copyright (c) Elliot Nunn */
/* Licensed under the MIT license */

#include <stdbool.h>
#include <stdio.h>
#include <string.h>

#include <Devices.h>
#include <Files.h>

#include "constnames.h"
#include "scratch.h"
#include "tap.h"

void testRead(void) {
	puts("# Testing Read");

	struct line {
		int filesize, initialpos, mode, delta, readsize, err;
		char data[6];
	};

	struct line lines[] = {
		{.filesize=0, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=0, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=2, .data="a", .err=eofErr},
		{.filesize=1, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=3, .data="ab", .err=eofErr},
		{.filesize=2, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=1, .data="b", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=2, .data="b", .err=eofErr},
		{.filesize=2, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=3, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsAtMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsAtMark, .delta=0, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsAtMark, .delta=0, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsAtMark, .delta=0, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsAtMark, .delta=0, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsAtMark, .delta=0, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsAtMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsAtMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=0, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=2, .data="a", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=1, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=0, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=3, .data="ab", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=1, .data="b", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=2, .data="b", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=1, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromStart, .delta=3, .readsize=0, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=3, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=3, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromStart, .delta=4, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=0, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=1, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=2, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=3, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=3, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=3, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=4, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=4, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromStart, .delta=5, .readsize=0, .data="", .err=eofErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=0, .initialpos=0, .mode=fsFromLEOF, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=1, .data="a", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=2, .data="a", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromLEOF, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=1, .data="a", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=2, .data="ab", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=3, .data="ab", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=1, .data="b", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=2, .data="b", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromLEOF, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromLEOF, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-4, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-3, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-2, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=-1, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromLEOF, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=0, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=2, .data="a", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=1, .data="", .err=eofErr},
		{.filesize=1, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=eofErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=1, .data="a", .err=noErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=2, .data="a", .err=eofErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=1, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=3, .data="ab", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=1, .data="b", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=2, .data="b", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=1, .data="", .err=eofErr},
		{.filesize=2, .initialpos=0, .mode=fsFromMark, .delta=3, .readsize=0, .data="", .err=eofErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=1, .data="a", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=2, .data="ab", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=3, .data="ab", .err=eofErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=1, .data="b", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=2, .data="b", .err=eofErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=1, .data="", .err=eofErr},
		{.filesize=2, .initialpos=1, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=eofErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=1, .data="a", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=2, .data="ab", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=3, .data="ab", .err=eofErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=1, .data="b", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=2, .data="b", .err=eofErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=2, .initialpos=2, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=3, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=3, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=0, .mode=fsFromMark, .delta=4, .readsize=0, .data="", .err=eofErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=2, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=1, .mode=fsFromMark, .delta=3, .readsize=0, .data="", .err=eofErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=1, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=2, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=eofErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=1, .data="a", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=2, .data="ab", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=3, .data="abc", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=4, .data="abc", .err=eofErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=1, .data="b", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=2, .data="bc", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=3, .data="bc", .err=eofErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=1, .data="c", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=2, .data="c", .err=eofErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=3, .initialpos=3, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=-1, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=0, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=1, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=2, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=3, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=3, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=3, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=4, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=4, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=0, .mode=fsFromMark, .delta=5, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-2, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=-1, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=0, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=1, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=2, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=2, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=3, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=3, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=1, .mode=fsFromMark, .delta=4, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-3, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-2, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=-1, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=0, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=1, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=1, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=2, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=2, .mode=fsFromMark, .delta=3, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-4, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-3, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-2, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=-1, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=0, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=0, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=1, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=3, .mode=fsFromMark, .delta=2, .readsize=0, .data="", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-5, .readsize=0, .data="", .err=posErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-5, .readsize=1, .data="", .err=posErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-4, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-4, .readsize=1, .data="a", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-4, .readsize=2, .data="ab", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-4, .readsize=3, .data="abc", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-4, .readsize=4, .data="abcd", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-4, .readsize=5, .data="abcd", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-3, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-3, .readsize=1, .data="b", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-3, .readsize=2, .data="bc", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-3, .readsize=3, .data="bcd", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-3, .readsize=4, .data="bcd", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-2, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-2, .readsize=1, .data="c", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-2, .readsize=2, .data="cd", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-2, .readsize=3, .data="cd", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-1, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-1, .readsize=1, .data="d", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=-1, .readsize=2, .data="d", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=0, .readsize=0, .data="", .err=noErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=0, .readsize=1, .data="", .err=eofErr},
		{.filesize=4, .initialpos=4, .mode=fsFromMark, .delta=1, .readsize=0, .data="", .err=eofErr},
		{-1}
	};

	for (struct line *l=lines; l->filesize!=-1; l++) {
		short ref = MkScratchFileAlphabetic(l->filesize);

		// Pre-set the mark
		struct IOParam setuppb = {.ioRefNum=ref, .ioPosMode=fsFromStart, .ioPosOffset=l->initialpos};
		PBSetFPosSync((void *)&setuppb);
		long thepos = 99;
		GetFPos(ref, &thepos);
		if (thepos != l->initialpos) TAPBailOut("Could not pre-set mark, wanted %d got %d", l->initialpos, thepos);

		char buf[6] = {};

		struct IOParam pb = {.ioRefNum=ref, .ioPosMode=l->mode, .ioPosOffset=l->delta, .ioReqCount=l->readsize, .ioActCount=99, .ioBuffer=buf};
		PBReadSync((void *)&pb);

		bool ok = !strcmp(buf, l->data) && pb.ioResult==l->err;
		TAPResult(ok, "Read(filesize=%d, initialpos=%d, mode=%s, delta=%d, readsize=%d) -> (data=\"%s\", err=%s)",
			l->filesize, l->initialpos, PosModeName(l->mode), l->delta, l->readsize, l->data, ErrName(l->err));

		if (!ok) {
			printf("# got (data=\"%s\", err=%s)\n", buf, ErrName(pb.ioResult));
		}

		// HFS has been observed to return a negative ioActCount
		if (pb.ioActCount != strlen(buf) && pb.ioActCount >= 0) {
			TAPBailOut("PB.ioActCount contradicts the letters in the buffer (%d vs %d)\n", pb.ioActCount, strlen(buf));
		}

		thepos = 99;
		GetFPos(ref, &thepos);
		if (thepos != pb.ioPosOffset) TAPBailOut("FCB.fcbCrPs != PB.ioPosOffset");

		FSClose(ref);
		FSDelete("\pscratch", 0);
	}
}
