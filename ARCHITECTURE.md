# Layers

```
┌────────────────────────────────────────────────────────────────────────────────────────────────┐
│  Mac OS                                                                                        │
│                                                                                                │
│ Device Manager, File Manager, Event Manager, QuickDraw, Display Manager                        │
│                                                                                                │
└────────────────────────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────┐ ┌──────────────────────────────┐ ┌──────────────────────────────┐
│  device-9p.c                 │ │  device-input.c              │ │  device-gpu.c                │
│                              │ │                              │ │                              │
│ 9P filesystem driver         │ │ Tablet input driver          │ │ Video driver                 │
│                              │ │                              │ │                              │
└──────────────────────────────┘ │                              │ │                              │
┌──────────────────────────────┐ │                              │ │                              │
│  multifork-*.c               │ │                              │ │                              │
│                              │ │                              │ │                              │
│ Fake resource forks and      │ │                              │ │                              │
│ Finder info in various disk  │ │                              │ │                              │
│ formats (AppleDouble, Rez)   │ │                              │ │                              │
│                              │ │                              │ │                              │
└──────────────────────────────┘ │                              │ │                              │
┌─────────────┬────────────────┐ │                              │ │                              │
│             │  9buf.c        │ │                              │ │                              │
│  9p.c       │                │ │                              │ │                              │
│             │ Buffered IO    │ │                              │ │                              │
│             └────────────────┤ │                              │ │                              │
│ Plan 9 filesystem protocol   │ │                              │ │                              │
│ as a C API                   │ │                              │ │                              │
│                              │ │                              │ │                              │
└──────────────────────────────┘ └──────────────────────────────┘ └──────────────────────────────┘
┌────────────────────────────────────────────────────────────────────────────────────────────────┐
│  virtqueue.c                                                                                   │
│                                                                                                │
│ Platform-independent Virtio queue layer                                                        │
└────────────────────────────────────────────────────────────────────────────────────────────────┘
┌────────────────────────────────────────────────────────────────────────────────────────────────┐
│  transport-*.c                                                                                 │
│                                                                                                │
│ Platform-dependent Virtio transport layer                                                      │
└────────────────────────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────┐  ┌──────────────────────────────────────────────┐
│  NuBus Virtio device                         │  │  PCI Virtio device                           │
│ (on qemu-system-m68k)                        │  │ (on qemu-system-ppc)                         │
│                                              │  │                                              │
└──────────────────────────────────────────────┘  └──────────────────────────────────────────────┘
```
